<!doctype html><html dir=ltr lang=en data-theme><head><title>Denis MACHARD
|
Authoritary PowerDNS installation on CentOS</title><meta charset=utf-8><meta name=generator content="Hugo 0.117.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="
      Infrastructure architect by profession but always consider himself as a developer and an open source enthusiast.


    "><link rel=stylesheet href=/css/main.min.a956a7860fcf75291ef2e359251769d8df586ea2fb01de06445ab2d52b512e04.css integrity="sha256-qVanhg/PdSke8uNZJRdp2N9YbqL7Ad4GRFqy1StRLgQ=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=/posts/0018-powerdns-installation/><script type=text/javascript src=/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.ea8ebe268922ef9849261a1312cd65b640595e65251ce4c00534a176afd1ac0c.js integrity="sha256-6o6+Joki75hJJhoTEs1ltkBZXmUlHOTABTShdq/RrAw=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Authoritary PowerDNS installation on CentOS"><meta name=twitter:description content="PowerDNS authoritary servers installation on *CentOS 7 with sqlite database"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Authoritary PowerDNS installation on CentOS","headline":"Authoritary PowerDNS installation on CentOS","alternativeHeadline":"","description":"
      
        PowerDNS authoritary servers installation on *CentOS 7 with sqlite database


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/dmachard.github.io\/posts\/0018-powerdns-installation\/"},"author":{"@type":"Person","name":"Denis MACHARD"},"creator":{"@type":"Person","name":"Denis MACHARD"},"accountablePerson":{"@type":"Person","name":"Denis MACHARD"},"copyrightHolder":{"@type":"Person","name":"Denis MACHARD"},"copyrightYear":"2020","dateCreated":"2020-06-21T00:00:00.00Z","datePublished":"2020-06-21T00:00:00.00Z","dateModified":"2020-06-21T00:00:00.00Z","publisher":{"@type":"Organization","name":"Denis MACHARD","url":"https://dmachard.github.io/","logo":{"@type":"ImageObject","url":"https:\/\/dmachard.github.io\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/dmachard.github.io\/posts\/0018-powerdns-installation\/","wordCount":"522","genre":[],"keywords":["dns","powerdns","authoritary"]}</script></head><body><header><div class="page-top
."><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><nav><ul class=nav__list id=navMenu><div class=nav__links><li><a href=/ title>Home</a></li><li><a href=/posts title>Archive</a></li><li><a href=/tags title>Tags</a></li></div><ul><li><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></ul></nav></div></header><div class=wrapper><aside><div class="sidebar
."><div class=sidebar__content><div class=logo-title><div class=title><img src=/images/profile.png alt="profile picture"><h3 title><a href=/>My technical gists</a></h3><div class=description><p>Infrastructure architect by profession but always consider himself as a developer and an open source enthusiast.</p></div></div></div><ul class=social-links><li><a href=https://dmachard.github.io/index.xml rel=me aria-label=e-mail><i class="fas fa-rss fa-2x" aria-hidden=true></i></a></li><li><a href=https://github.com/dmachard/ rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://twitter.com/denis_machard rel=me aria-label=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li><a href=https://www.linkedin.com/in/dmachard/ rel=me aria-label=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li><a href=mailto:d.machard@gmail.com rel=me aria-label=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer--sidebar"><div class=by_farbox><ul class=footer__list><li class=footer__item>&copy;
Denis MACHARD
2023</li></ul></div></footer><script type=text/javascript src=/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0=" crossorigin=anonymous></script></div></aside><main><div class=autopagerize_page_element><div class=content><div class="post
."><div class=post-content><div class=post-title><h1>Authoritary PowerDNS installation on CentOS</h1></div><p>PowerDNS authoritary servers installation on *<em>CentOS 7</em> with <strong>sqlite</strong> database</p><h1 id=table-of-contents>Table of contents</h1><ul><li><a href=#Installation>Installation</a></li><li><a href=#Configuration>Configuration</a></li><li><a href=#start-server>Start server</a></li><li><a href=#manage-configuration>Manage configuration</a></li><li><a href=#cache-purge-entries>Cache purge entries</a></li><li><a href=#dns-update-rfc2136>DNS-UPDATE (RFC2136)</a></li><li><a href=#gslb-feature>GSLB feature</a></li><li><a href=#play-with-rest-api>Play with REST API</a></li></ul><h2 id=installation>Installation</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
</span></span><span style=display:flex><span>yum -y install epel-release
</span></span><span style=display:flex><span>yum --enablerepo<span style=color:#f92672>=</span>epel install luajit libsodium
</span></span><span style=display:flex><span>yum --enablerepo<span style=color:#f92672>=</span>epel install jq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl -o /etc/yum.repos.d/powerdns-auth-42.repo https://repo.powerdns.com/repo-files/centos-auth-42.repo
</span></span><span style=display:flex><span>yum install pdns pdns-tools pdns-backend-sqlite
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/PowerDNS/pdns/master/modules/gsqlite3backend/schema.sqlite3.sql
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir /var/db/pdns
</span></span><span style=display:flex><span>sqlite3 /var/db/pdns/pdns.db
</span></span><span style=display:flex><span>.read schema.sqlite3.sql
</span></span><span style=display:flex><span>.quit
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chown -R pdns:pdns /var/db/pdns
</span></span></code></pre></div><h2 id=configuration>Configuration</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/pdns/pdns.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>version-string<span style=color:#f92672>=</span>anonymous
</span></span><span style=display:flex><span>setuid<span style=color:#f92672>=</span>pdns
</span></span><span style=display:flex><span>setgid<span style=color:#f92672>=</span>pdns
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>local-ipv6<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>launch<span style=color:#f92672>=</span>gsqlite3
</span></span><span style=display:flex><span>gsqlite3-database<span style=color:#f92672>=</span>/var/db/pdns/pdns.db
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>webserver<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>webserver-address<span style=color:#f92672>=</span>0.0.0.0
</span></span><span style=display:flex><span>webserver-port<span style=color:#f92672>=</span><span style=color:#ae81ff>8081</span>
</span></span><span style=display:flex><span>webserver-allow-from<span style=color:#f92672>=</span>127.0.0.0/8,10.0.0.0/24
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>api<span style=color:#f92672>=</span>on
</span></span><span style=display:flex><span>api-key<span style=color:#f92672>=</span>test
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>master<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dnsupdate<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>local-address<span style=color:#f92672>=</span>0.0.0.0
</span></span><span style=display:flex><span>local-port<span style=color:#f92672>=</span><span style=color:#ae81ff>5300</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log-dns-details<span style=color:#f92672>=</span>on
</span></span><span style=display:flex><span>log-dns-queries<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>log-timestamp<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>loglevel<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>security-poll-suffix<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>allow-dnsupdate-from<span style=color:#f92672>=</span>
</span></span></code></pre></div><h2 id=start-server>Start server</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable pdns.service
</span></span><span style=display:flex><span>systemctl start pdns.service
</span></span></code></pre></div><h2 id=manage-configuration>Manage configuration</h2><p>Manage configuration with pdnsutil command</p><ul><li>Add a new zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil create-zone home.local
</span></span><span style=display:flex><span>pdnsutil create-zone home.local ns1.home.local
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pdnsutil add-record home.local ns1 A <span style=color:#ae81ff>3600</span> 10.0.0.71
</span></span></code></pre></div><ul><li>Add a new resource record</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil add-record home.local ea A <span style=color:#ae81ff>300</span> 10.0.0.72
</span></span></code></pre></div><ul><li>List all zones</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil list-all-zones
</span></span></code></pre></div><ul><li>Delete a zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil delete-zone home.local
</span></span></code></pre></div><ul><li>Delete a resource record</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil delete-rrset home.local ea A
</span></span></code></pre></div><ul><li>Update resource record</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil replace-rrset home.local ea A <span style=color:#ae81ff>3600</span> 10.0.0.1
</span></span></code></pre></div><ul><li>Edit a zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export EDITOR<span style=color:#f92672>=</span>vim
</span></span><span style=display:flex><span>pdnsutil edit-zone home.local
</span></span></code></pre></div><h2 id=cache-purge-entries>Cache purge entries</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdns_control purge test1.home.local
</span></span></code></pre></div><h2 id=dns-update-rfc2136>DNS-UPDATE (RFC2136)</h2><h3 id=activation>Activation</h3><ul><li>Generate the tsig key for the domain to securize</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil generate-tsig-key homelocal_update hmac-md5
</span></span></code></pre></div><ul><li>Activate the key in the domain</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil set-meta home.local TSIG-ALLOW-DNSUPDATE homelocal_update
</span></span></code></pre></div><ul><li>Authorize just some network to make update in the zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil set-meta home.local ALLOW-DNSUPDATE-FROM 10.0.0.0/24
</span></span></code></pre></div><ul><li>Activate notification to slave server on each update</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil set-meta home.local NOTIFY-DNSUPDATE <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><ul><li>Display all TSIG keys</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil list-tsig-keys
</span></span></code></pre></div><h3 id=testing-dns-update>Testing DNS UPDATE</h3><ul><li>Create the file nsupdate.txt with the following content</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>server &lt;pdns_ip_address&gt; &lt;pdns_port&gt;
</span></span><span style=display:flex><span>zone home.local
</span></span><span style=display:flex><span>update add test1.home.local <span style=color:#ae81ff>3600</span> A 10.0.0.140
</span></span><span style=display:flex><span>key &lt;key_name&gt; &lt;tsig_key&gt;
</span></span><span style=display:flex><span>show
</span></span><span style=display:flex><span>send
</span></span></code></pre></div><ul><li>Execute the nsupdate command to make the update in the zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nsupdate -v dnsupdate.txt
</span></span></code></pre></div><h2 id=gslb-feature>GSLB feature</h2><ul><li>Update the configuration to activate LUA</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>enable-lua-records<span style=color:#f92672>=</span>yes
</span></span></code></pre></div><ul><li>Return time with TXT type</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil add-record time.gslb.test time LUA <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#39;TXT &#34;os.date()&#34;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dig @10.0.0.235 -t txt time.gslb.test +short
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;Mon Oct 14 16:05:06 2019&#34;</span>
</span></span></code></pre></div><ul><li>Return random IP with round robin</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil add-record gslb.test roundrobin LUA <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34;A 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\&#34;pickrandom({&#39;10.0.0.1&#39;,&#39;10.0.0.2&#39;,&#39;10.0.0.3&#39;,&#39;10.0.0.4&#39;})\&#34;&#34;</span>
</span></span></code></pre></div><ul><li>Return specific IP accord to the result of TCP monitor. If all backends are down, then the complete list is returned otherwhise just one server is returned in random mode.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil add-record gslb.test tcp LUA <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34;A 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\&#34;ifportup(80,{&#39;10.0.0.1&#39;, &#39;10.0.0.2&#39;}, {selector=&#39;random&#39;,backupSelector=&#39;all&#39;})\&#34;&#34;</span>
</span></span></code></pre></div><ul><li>Return specific IP accord to the result of HTTP monitor. An URL is currently considered UP if the HTTP response codeis equal to 200. The checks are performed sequentially, with aminimum delay of 5 seconds.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pdnsutil add-record gslb.test http LUA <span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34;A 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\&#34;ifurlup(&#39;http://home.local&#39;, {&#39;10.0.0.1&#39;,&#39;10.0.0.2&#39;}, 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>{selector=&#39;random&#39;, backupSelector=&#39;all&#39;,stringmatch=&#39;UP&#39;})\&#34;&#34;</span>
</span></span></code></pre></div><h2 id=play-with-rest-api>Play with REST API</h2><ul><li>Get all zones</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -H <span style=color:#e6db74>&#39;X-API-Key: dns&#39;</span> http://127.0.0.1:8082/api/v1/servers/localhost
</span></span></code></pre></div><ul><li>Get a specific zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -H <span style=color:#e6db74>&#39;X-API-Key: dns&#39;</span> http://127.0.0.1:8082/api/v1/servers/localhost/zones/home.local
</span></span></code></pre></div><ul><li>Generate a TSIG key</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -X POST -H <span style=color:#e6db74>&#34;X-API-Key: dns&#34;</span> -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> 
</span></span><span style=display:flex><span>-d <span style=color:#e6db74>&#39;{&#34;name&#34;: &#34;mytsigkey2&#34;, &#34;algorithm&#34;: &#34;hmac-sha256&#34;}&#39;</span> 
</span></span><span style=display:flex><span>http://127.0.0.1:8082/api/v1/servers/localhost/tsigkeys
</span></span></code></pre></div><ul><li>Get metadata for a specific zone</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -H <span style=color:#e6db74>&#39;X-API-Key: dns&#39;</span> http://127.0.0.1:8082/api/v1/servers/localhost/zones/home.local/metadata
</span></span></code></pre></div><ul><li>Delete metadata</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -X DELETE -H <span style=color:#e6db74>&#39;X-API-Key: dns&#39;</span>
</span></span><span style=display:flex><span>http://127.0.0.1:8082/api/v1/servers/localhost/zones/home.local/metadata/ALLOW-DNSUPDATE-FROM
</span></span></code></pre></div><ul><li>Add metadata</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -X POST -H <span style=color:#e6db74>&#39;X-API-Key: dns&#39;</span> -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#e6db74>&#34;@restapi_metadata.json&#34;</span>
</span></span><span style=display:flex><span>http://127.0.0.1:8082/api/v1/servers/localhost/zones/home.local/metadata
</span></span></code></pre></div><ul><li>Update RR</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s -X PATCH -H <span style=color:#e6db74>&#34;X-API-Key: dns&#34;</span> -d <span style=color:#e6db74>&#39;{&#34;rrsets&#34;: [{&#34;name&#34;: &#34;test1.home.local.&#34;, &#34;type&#34;: &#34;A&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;changetype&#34;: &#34;REPLACE&#34;, &#34;records&#34;: [{&#34;content&#34;: &#34;3.100.10.72&#34;, &#34;disabled&#34;: false}],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;ttl&#34;: 3600}]}&#39;</span> http://10.0.0.235:8082/api/v1/servers/localhost/zones/home.local.
</span></span></code></pre></div></div><div class=post-footer><div class=info><span class=separator><a class=tag href=/tags/dns/>dns</a><a class=tag href=/tags/powerdns/>powerdns</a><a class=tag href=/tags/authoritary/>authoritary</a></span></div></div></div></div></div></main></div><footer class="footer footer--base"><div class=by_farbox><ul class=footer__list><li class=footer__item>&copy;
Denis MACHARD
2023</li></ul></div></footer><script type=text/javascript src=/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0=" crossorigin=anonymous></script></body></html>