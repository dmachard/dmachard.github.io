<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>lua on My technical gists</title><link>https://dmachard.github.io/tags/lua/</link><description>Recent content in lua on My technical gists</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Sun, 21 Nov 2021 00:00:00 +0100</lastBuildDate><atom:link href="https://dmachard.github.io/tags/lua/index.xml" rel="self" type="application/rss+xml"/><item><title>PowerDNS/Dnsdist: custom config with LUA</title><link>https://dmachard.github.io/posts/0041-dnsdist-lua-hostname/</link><pubDate>Sun, 21 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0041-dnsdist-lua-hostname/</guid><description>This post gives some examples of LUA code to modify the behavior of your dnsdist
Table of contents Resolve hostname Get hostnmae Resolve hostname This exemple enable to make dns resolution at startup.
local f = assert(io.popen(&amp;#39;getent hosts &amp;lt;YOURDNSNAME&amp;gt; | cut -d &amp;#34; &amp;#34; -f 1&amp;#39;, &amp;#39;r&amp;#39;)) local dnscollector = f:read(&amp;#39;*a&amp;#39;) or &amp;#34;127.0.0.1&amp;#34; f:close() dnscollector = string.gsub(dnscollector, &amp;#34;\n$&amp;#34;, &amp;#34;&amp;#34;) fstl = newFrameStreamTcpLogger(dnscollector.. &amp;#34;:6000&amp;#34;) Get hostname Example to get the hostname of your machine and reuse-it in your dnsdist config</description></item></channel></rss>