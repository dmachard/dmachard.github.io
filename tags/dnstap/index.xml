<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>dnstap on My technical gists</title><link>https://dmachard.github.io/tags/dnstap/</link><description>Recent content in dnstap on My technical gists</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Mon, 28 Aug 2023 00:00:00 +0100</lastBuildDate><atom:link href="https://dmachard.github.io/tags/dnstap/index.xml" rel="self" type="application/rss+xml"/><item><title>CoreDNS: secure your DNSTAP streams with TLS</title><link>https://dmachard.github.io/posts/0053-coredns-dnstap-tls/</link><pubDate>Mon, 28 Aug 2023 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0053-coredns-dnstap-tls/</guid><description>This post explains how to enable TLS on outgoing dnstap streams with CoreDNS. Please refer to How to enable it on main dns servers to enable DNStap in basic way.
TLS is supported since the version 1.11
Enable Secure DNSTAP with CoreDNS Create working folder
mkdir securednstap cd securednstap Create the following config_coredns.conf in your working folder.
tls:// to use TLS 192.168.1.200:6000 is the IP/port address of your DNStap collector. skipverify: this setting ignore TLS verification, do not use this settings in production.</description></item><item><title>DnsCollector/dnstap: collect dnstap stream and analysing logs with Loki+Grafana</title><link>https://dmachard.github.io/posts/0044-dnscollector-grafana-loki/</link><pubDate>Thu, 16 Dec 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0044-dnscollector-grafana-loki/</guid><description>Example to collect dnstap stream and analysing logs with Loki+Grafana
Table of contents Prequisites Overview Configuration Dashboard Prequisites Install the dnscollector like described in the following guide.
Overview With this example the collector waits incoming dnstap messages sent by your dns server, then you can watch and analysing logs on your Grafana dashboard.
Configuration Download the config.yml file.
global: trace: verbose: true multiplexer: collectors: - name: tap dnstap: listen-ip: 0.0.0.0 listen-port: 6000 tls-support: true cert-file: &amp;#34;/etc/dnscollector/dnscollector.</description></item><item><title>DnsCollector/dnstap: collect dnstap stream and follow dns answers with JSON format</title><link>https://dmachard.github.io/posts/0042-dnscollector-dnstap-json-answers/</link><pubDate>Sat, 27 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0042-dnscollector-dnstap-json-answers/</guid><description>Example to collect dnstap messages from dns servers and follow dns answers with JSON format.
Table of contents Prequisites Overview Configuration Logs Prequisites Install the dnscollector like described in the following guide.
Overview With this example, the collector waits incoming dnstap messages and redirect them to stdout in JSON format. JSON ouput can be used to get dns answers.
Configuration Download the config.yml file.
global: trace: verbose: false multiplexer: collectors: - name: tap dnstap: listen-ip: 0.</description></item><item><title>DnsCollector/dnstap: collect dnstap stream and backup-it to log files</title><link>https://dmachard.github.io/posts/0034-dnscollector-dnstap-to-log-files/</link><pubDate>Wed, 10 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0034-dnscollector-dnstap-to-log-files/</guid><description>Example to collect dnstap messages from dns servers and backup-it in log files
Table of contents Prequisites Overview Configuration Logs Prequisites Install the dnscollector like described in the following guide.
Overview With this example, the collector waits incoming dnstap messages and save-it in log files in text format with rotation.
Configuration Download the config.yml file.
global: trace: verbose: true multiplexer: collectors: - name: &amp;#34;tap&amp;#34; dnstap: listen-ip: 0.0.0.0 listen-port: 6000 loggers: - name: file logfile: file-path: &amp;#34;/var/run/dnscollector/dnstap.</description></item><item><title>DnsCollector/dnstap: collect dnstap stream and get statistics usage</title><link>https://dmachard.github.io/posts/0035-dnscollector-grafana-prometheus/</link><pubDate>Wed, 10 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0035-dnscollector-grafana-prometheus/</guid><description>Example to collect dnstap stream and get statistics usage
Table of contents Prequisites Overview Configuration Dashboard Prequisites Install the dnscollector like described in the following guide.
Overview With this example the collector waits incoming dnstap messages sent by your dns server, then you can watch statistics and metrics on your Grafana dashboard.
Configuration Download the config.yml file.
global: trace: verbose: true multiplexer: collectors: - name: tap_tls dnstap: listen-ip: 0.0.0.0 listen-port: 6000 tls-support: true cert-file: &amp;#34;/etc/dnscollector/dnscollector.</description></item><item><title>DnsCollector/dnstap: installation guide from binary</title><link>https://dmachard.github.io/posts/0007-dnscollector-install-binary/</link><pubDate>Wed, 08 Sep 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0007-dnscollector-install-binary/</guid><description>This post details how to install the go-dnscollector tool with systemd.
Table of contents Installation Certificate Configuration Start Installation Install go-dnscollector from binary
Create some folders and user
adduser -M dnscollector mkdir /etc/dnscollector/ mkdir /var/run/dnscollector/ Export the following variable to get the version you want to download
export DNSCOLLECTOR_VERSION=v0.10.0 Download the binary
wget https://github.com/dmachard/go-dnscollector/releases/download/$(echo $DNSCOLLECTOR_VERSION)/go-dnscollector_$(echo $DNSCOLLECTOR_VERSION)_linux_amd64.tar.gz tar xvf go-dnscollector_$(echo $DNSCOLLECTOR_VERSION)_linux_amd64.tar.gz mv go-dnscollector /usr/bin/ mv config.yml /etc/dnscollector/config.yml.default Certificate Create a certificate. In this example we used a self-signed cert.</description></item><item><title>PowerDNS/dnsdist: how to configure TLS for outgoing dnstap stream using stunnel</title><link>https://dmachard.github.io/posts/0006-powerdns-dnsdist-dnstap-tls/</link><pubDate>Wed, 08 Sep 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0006-powerdns-dnsdist-dnstap-tls/</guid><description>This post will detail how to wrap your outgoing dnstap stream with TLS using stunnel.
Table of contents Introduction Installation Configuration Systemd Introduction This tutorial assumes you have a working PowerDNS dnsdist server installed on a Centos/AlmaLinux with dnstap enabled. Also we will use the same user/group that dnsdist for stunnel. Any feedbacks will be appreciated to improve this tutorial.
Installation Install stunnel
yum install stunnel mkdir /var/run/stunnel chown dnsdist:dnsdist /var/run/stunnel Configuration Configure stunnel</description></item><item><title>How to enable and use the DNSTAP protocol on main dns servers</title><link>https://dmachard.github.io/posts/0001-dnstap-testing/</link><pubDate>Sat, 23 May 2020 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0001-dnstap-testing/</guid><description>This post details how to enable the dnstap feature in main open source dns servers.</description></item></channel></rss>