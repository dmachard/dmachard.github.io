<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>proxmox on My technical gists</title><link>https://dmachard.github.io/tags/proxmox/</link><description>Recent content in proxmox on My technical gists</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Mon, 15 Nov 2021 00:00:00 +0100</lastBuildDate><atom:link href="https://dmachard.github.io/tags/proxmox/index.xml" rel="self" type="application/rss+xml"/><item><title>Proxmox: Infra as code with terraform</title><link>https://dmachard.github.io/posts/0040-promox-terraform-create-vm/</link><pubDate>Mon, 15 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0040-promox-terraform-create-vm/</guid><description>This post details how to create a virtual machine with Terraform on your proxmox infrastructure.
Table of contents Prerequisites Configure Proxmox as Code Cloud-init custom config Prerequisites Terraform installed on your system AlmaLinux cloudinit template on your promox system Configure Create a main.tf file and install the provider Telmate/promox
terraform { required_providers { proxmox = { source = &amp;#34;Telmate/proxmox&amp;#34; version = &amp;#34;2.9.0&amp;#34; } } } Run terraform init to install the provider.</description></item><item><title>Proxmox: building a cloud-init template with Almalinux8</title><link>https://dmachard.github.io/posts/0039-promox-cloudinit/</link><pubDate>Sun, 14 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0039-promox-cloudinit/</guid><description>How to build a cloud-init template with Almalinux8
Table of contents Prerequisites Build Prerequisites Connect on your proxmox server and export the following variables
export CI_IMAGE=&amp;#34;AlmaLinux-8-GenericCloud-latest.x86_64.qcow2&amp;#34; export PM_STORAGE=&amp;#34;local-lvm&amp;#34; export VM_NAME=&amp;#34;almalinux-8-cloudinit-template&amp;#34; export VM_ID=1000 export VM_MEM=1024 export VM_OPTS=-&amp;#34;-net0 virtio,bridge=vmbr1&amp;#34; Build Download a pre-configured image from AlmaLinuxâ€™s official repositories.
wget https://repo.almalinux.org/almalinux/8/cloud/x86_64/images/$CI_IMAGE Create empty VM
qm create $VM_ID --name $VM_NAME --memory $VM_MEM $VM_OPTS Import the downloaded image to the VM
$ qm importdisk $VM_ID $CI_IMAGE $PM_STORAGE Assign the imported disk to scsi0</description></item><item><title>Proxmox: Passthrough Physical Disk to Virtual Machine</title><link>https://dmachard.github.io/posts/0038-promox-disk-passthrough/</link><pubDate>Sun, 14 Nov 2021 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0038-promox-disk-passthrough/</guid><description>How to attach physical disk to Virtual Machine on Promox
Table of contents Identify Disks Attach disks Setup on Windows Identify Disks Identify all disks installed on the Promox server.
$ ls /dev/disk/by-id/ | grep ata ata-ST3000VN000-1HJxxx_W6Axxxx ata-ST3000VN000-1HJxxx_W6Axxx ata-WDC_WD30EFRX-68xxx_WD-WCC1Txxxx ata-WDC_WD30EFRX-68xxx_WD-WCC1Txxxx ata-WDC_WD40EFRX-68xxx_WD-WCC7Kxxx Attach disks Get the ID of the VM and attach the disk to them.
qm set 100 -virtio2 /dev/disk/by-id/ata-ST3000VN000-1HJxxx_W6Axxxx qm set 100 -virtio3 /dev/disk/by-id/ata-WDC_WD30EFRX-68xxx_WD-WCC1Txxxx Setup on Windows Download the latest stable Windows VirtIO drivers from https://github.</description></item></channel></rss>