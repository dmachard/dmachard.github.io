<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>cdb on My technical gists</title><link>https://dmachard.github.io/tags/cdb/</link><description>Recent content in cdb on My technical gists</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Sat, 01 Jul 2023 00:00:00 +0100</lastBuildDate><atom:link href="https://dmachard.github.io/tags/cdb/index.xml" rel="self" type="application/rss+xml"/><item><title>PowerDNS dnsdist: dynamic blacklist with CDB database</title><link>https://dmachard.github.io/posts/0046-dnsdist-blacklist/</link><pubDate>Sat, 01 Jul 2023 00:00:00 +0100</pubDate><guid>https://dmachard.github.io/posts/0046-dnsdist-blacklist/</guid><description>A DNSdist configuration example to block big list of ads/malwares domains effectively with a CDB database and dynamic reload.
Download the following CDB blocklist file https://github.com/dmachard/blocklist-domains and put-it in /etc/dnsdist/conf.d/
The latest version of the configuration can be downloaded from github.
--- open your CDB database --- dnsdist with reload this database every 3600s kvs = newCDBKVStore(&amp;#34;/etc/dnsdist/conf.d/blocklist.cdb&amp;#34;, 3600) -- block domains ? addAction(KeyValueStoreLookupRule(kvs, KeyValueLookupKeyQName(false)), SetTagAction(&amp;#39;policy_block&amp;#39;, &amp;#39;&amp;#39;)) addAction(TagRule(&amp;#39;policy_block&amp;#39;), SpoofAction({&amp;#34;127.0.0.1&amp;#34;, &amp;#34;::1&amp;#34;})) --- or answer with NXDOMAIN --- addAction(TagRule(&amp;#39;policy_block&amp;#39;), RCodeAction(DNSRCode.</description></item></channel></rss>